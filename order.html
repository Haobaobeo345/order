<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8">
<title>Äáº·t mÃ³n</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
}
.container {
  max-width: 400px;
  margin: 30px auto;
  background: #fff;
  padding: 20px;
  border-radius: 12px;
}
h2 {
  text-align: center;
}
.menu-item {
  display: flex;
  justify-content: space-between;
  margin: 8px 0;
}
.total {
  font-weight: bold;
  text-align: right;
  margin: 15px 0;
}
button {
  width: 100%;
  padding: 10px;
  background: green;
  color: white;
  border: none;
  border-radius: 6px;
}
.table-info {
  text-align: center;
  font-weight: bold;
  margin-bottom: 10px;
  color: #333;
}
</style>
</head>

<body>
<div class="container">
  <h2>ğŸ½ï¸ Äáº¶T MÃ“N</h2>

  <!-- HIá»‚N THá»Š BÃ€N -->
  <div class="table-info" id="tableInfo">BÃ n ?</div>

  <!-- MENU -->
  <div class="menu-item">
    <label><input type="checkbox" data-name="Phá»Ÿ" data-price="60000"> Phá»Ÿ</label>
    <span>60,000Ä‘</span>
  </div>

  <div class="menu-item">
    <label><input type="checkbox" data-name="CÆ¡m gÃ " data-price="45000"> CÆ¡m gÃ </label>
    <span>45,000Ä‘</span>
  </div>

  <div class="menu-item">
    <label><input type="checkbox" data-name="BÃºn bÃ²" data-price="55000"> BÃºn bÃ²</label>
    <span>55,000Ä‘</span>
  </div>

  <div class="menu-item">
    <label><input type="checkbox" data-name="TrÃ  sá»¯a" data-price="25000"> TrÃ  sá»¯a</label>
    <span>25,000Ä‘</span>
  </div>

  <div class="total">
    Tá»•ng tiá»n: <span id="total">0</span> Ä‘
  </div>

  <button onclick="submitOrder()">Gá»­i Ä‘Æ¡n</button>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbzha7XNsspzQaaWVqZ_NE6hFCbV-08elwNuNqU56_I/dev";

// ğŸ‘‰ Láº¤Y Sá» BÃ€N Tá»ª QR
const params = new URLSearchParams(window.location.search);
const tableNumber = params.get("table") || "?";

document.getElementById("tableInfo").innerText = "BÃ n " + tableNumber;

const checkboxes = document.querySelectorAll("input[type=checkbox]");
const totalEl = document.getElementById("total");

checkboxes.forEach(cb => cb.addEventListener("change", updateTotal));

function updateTotal() {
  let total = 0;
  checkboxes.forEach(cb => {
    if (cb.checked) total += Number(cb.dataset.price);
  });
  totalEl.innerText = total.toLocaleString();
}

async function submitOrder() {
  const items = [];
  let total = 0;

  checkboxes.forEach(cb => {
    if (cb.checked) {
      items.push(cb.dataset.name);
      total += Number(cb.dataset.price);
    }
  });

  if (items.length === 0 || tableNumber === "?") {
    alert("Thiáº¿u bÃ n hoáº·c chÆ°a chá»n mÃ³n!");
    return;
  }

  await fetch(API_URL, {
    method: "POST",
    body: JSON.stringify({
      table: tableNumber,
      items: items.join(", "),
      total: total
    })
  });

  alert("âœ… ÄÃ£ gá»­i Ä‘Æ¡n!");
  location.reload();
}
</script>

</body>
</html>
